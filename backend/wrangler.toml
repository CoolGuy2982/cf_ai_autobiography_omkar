name = "cf-ai-autobiography-backend"
main = "src/index.ts"
compatibility_date = "2025-01-09"

[observability]
enabled = true

[[d1_databases]]
binding = "DB"
database_name = "autobiography-db"
database_id = "c711cf60-c959-4de0-a95e-aa831e2cd6d8" # Ensure this matches your real D1 ID

[[r2_buckets]]
binding = "BUCKET"
bucket_name = "autobiography-files"

[[durable_objects.bindings]]
name = "INTERVIEW_SESSION"
class_name = "InterviewSession"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["InterviewSession"] # CHANGED: new_classes -> new_sqlite_classes

[vars]
# Secrets are loaded safely from .dev.vars (local) or Cloudflare Secrets (deploy)